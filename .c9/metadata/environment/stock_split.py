{"filter":false,"title":"stock_split.py","tooltip":"/stock_split.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":47,"column":19},"action":"insert","lines":["import requests","import csv","import numpy as np","import pandas as pd","import time","import os","from bs4 import BeautifulSoup","","start_time = time.time()","","path_ajust = os.getcwd() + '//ADJ_STOCK_CSV//'","path = os.getcwd() + '//STOCK_CSV//'","filename = os.listdir(path)","filenum = len(filename)","","","#URLリストを作成","","for i in range(0, filenum):","    print(filename[i])","    filepath = path + filename[i]","    adjfile_path = path_ajust + filename[i]","","    ohlcv = pd.read_csv(filepath,","                        index_col=0,","                        parse_dates=True).dropna()","","    Open = ohlcv['Open'].values","    High = ohlcv['High'].values","    Low = ohlcv['Low'].values","    Close = ohlcv['Close'].values","    Volume = ohlcv['Volume'].values","    Adj_Close = ohlcv['Adj Close'].values","","    df_split = Close / Adj_Close","","    Open = pd.Series(Open / df_split, index=ohlcv.index.values)","    High = pd.Series(High / df_split, index=ohlcv.index.values)","    Low = pd.Series(Low / df_split, index=ohlcv.index.values)","    Close = pd.Series(Close / df_split, index=ohlcv.index.values)","    Volume = pd.Series(Volume * df_split, index=ohlcv.index.values)","","    df = pd.concat([Open, High, Low, Close, Volume], axis=1)","    df.columns = ['Open', 'High', 'Low', 'Close', 'Volume']","    df.to_csv(adjfile_path)","","process_time = time.time() - start_time","print(process_time)"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":14,"column":0},"end":{"row":14,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1587715811877,"hash":"6b63ef3442050476fc53f72f7416e15854a4e91e"}